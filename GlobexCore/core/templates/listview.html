{% extends 'layouts/base.html' %}
{% block title %} {% if h1 %} {{ h1 }} {% endif %} {% endblock %} 

<!-- Specific CSS goes HERE -->
{% block stylesheets %}
    <style>
        /* Add your custom CSS styles here */
    </style>
{% endblock stylesheets %}

{% block content %}
{% load filters %}
    <!-- [ Main Content ] start -->
    <section class="pcoded-main-container">
        <div class="pcoded-wrapper">
            {% if h1 %}
            <h1>{{ h1 }}</h1><br>
            {% endif %}
            {% if bpattern %}
            <button type="button" class="btn btn-primary">
                <a href="{% url bpattern %}">{{ bname }}</a>
            </button>
            {% endif %}
            <div class="overflow-x-auto">
                <table class="table table-xs">
                    <thead >
                        <tr>
                            {% for field in model_fields %}
                                {% with field_name=field|replace:"_, " %}
                                    <th scope="col" >{{ field_name }}</th>
                                {% endwith %}
                            {% endfor %}
                            {% if patterns|length >= 1 %}
                            <th scope="col" >Actions</th>
                            {% endif %}
                        </tr>
                    </thead>
                    <tbody >
                        {% for item in object_list %}
                            <tr>
                                {% for field in model_fields %}
                                    {% with value=item|get_field_value:field %}
                                        <td >
                                            <!-- IF VALUE is a BOOL replace VALUE with SVG Icons-->
                                            {% if value is boolean and value %}
                                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" >
                                                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                                </svg>
                                            {% elif value is boolean and not value %}
                                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" >
                                                    <path stroke-linecap="round" stroke-linejoin="round" d="M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                                </svg>
                                            {% else %}
                                                {{ value }}
                                            {% endif %}
                                        </td>
                                    {% endwith %}
                                {% endfor %}
                                {% if patterns|length >= 1 %}
                                <td >
                                    <div >
                                        {% with pk=item|get_field_value:'id' %}
                                        <button id="dropdownDefault{{ pk }}" data-dropdown-toggle="dropdown{{ pk }}" >Actions
                                            <svg >
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                            </svg>
                                        </button>

                                        <!-- Dropdown menu -->

                                        <div id="dropdown{{ pk }}" >
                                            <ul >
                                                {% for name, pattern in patterns.items %}
                                                <li>
                                                    <a href="{% url pattern pk %}" >{{ name }}</a>
                                                </li>
                                                {% endfor %}
                                            </ul>
                                        </div>
                                    </div>                                     
                                </td>

                                {% endwith %}
                                {% endif %}
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </section>
    <!-- [ Main Content ] end -->
{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}{% endblock javascripts %}
